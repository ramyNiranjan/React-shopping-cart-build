(this.webpackJsonpgrupp4webshop=this.webpackJsonpgrupp4webshop||[]).push([[0],{36:function(e,t,a){e.exports=a(66)},41:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(32),l=a.n(r),o=(a(41),a(3)),s=a(9),m=a(20),i=a(21),u=a(16),d=a(2),E=Object(n.createContext)(),b=function(e){var t=e.children,a=Object(n.useState)([]),r=Object(d.a)(a,2),l=r[0],o=r[1],s=Object(n.useState)(0),m=Object(d.a)(s,2),b=m[0],f=m[1],p=Object(n.useState)([]),h=Object(d.a)(p,2),v=h[0],g=h[1],N=Object(n.useState)(!1),j=Object(d.a)(N,2),O=j[0],C=j[1],k=function(e){!function(e){localStorage.setItem("cart",JSON.stringify(e))}(e);var t=e.reduce((function(e,t){return e+t.quantity}),0);g(t);var a=e.reduce((function(e,t){return e+t.price*t.quantity}),0).toFixed(2);f(a)};Object(n.useEffect)((function(){!function(){var e=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[];o(e)}()}),[]),Object(n.useEffect)((function(){k(l)}),[b,v,l]);var y={cartItems:l,totalSum:b,itemCount:v,addProduct:function(e){l.find((function(t){return t.id===e.id}))||o((function(t){return[].concat(Object(u.a)(t),[Object(i.a)(Object(i.a)({},e),{},{quantity:1})])}))},increase:function(e){var t=Object(u.a)(l);t[t.findIndex((function(t){return t.id===e.id}))].quantity++,o(t)},decrease:function(e){var t=Object(u.a)(l);t[t.findIndex((function(t){return t.id===e.id}))].quantity--,o(t)},removeProduct:function(e){var t=l.filter((function(t){return t.id!==e.id}));o(t)},clearCart:function(){o([])},isInCart:function(e,t){return t.some((function(t){return t.id===e.id}))},toggleCart:function(e){return C(!e)},showCart:O};return c.a.createElement(E.Provider,{value:y},t)},f=a(15);function p(e){var t=e.product,a=Object(n.useContext)(E),r=a.increase,l=a.decrease,o=a.removeProduct;return c.a.createElement("div",{className:"cart-item"},c.a.createElement("div",{className:"cart-header"},c.a.createElement("div",{className:"cart-image-wrapper"},c.a.createElement("img",{className:"cart-image",alt:t.name,src:t.image})),c.a.createElement("h6",{className:"cart-name"},t.name)),c.a.createElement("div",{className:"cart-info"},c.a.createElement("p",{className:"cart-qty"},"Qty: ",t.quantity),c.a.createElement("p",{className:"cart-price"},"Price: ",t.price,":-")),c.a.createElement("div",{className:"cart-qty-change"},c.a.createElement("button",{onClick:function(){return r(t)},className:"cart-qty-increase button-qty"},c.a.createElement(f.b,null)),t.quantity>1&&c.a.createElement("button",{onClick:function(){return l(t)},className:"cart-qty-decrease button-qty"},c.a.createElement(f.a,null)),1===t.quantity&&c.a.createElement("button",{onClick:function(){return o(t)},className:"cart-qty-remove button-qty"},c.a.createElement(f.c,null))))}function h(e){e.toggle;var t=Object(n.useContext)(E),a=t.cartItems,r=t.totalSum,l=t.itemCount,o=t.clearCart,m=t.toggleCart,i=t.showCart;return c.a.createElement("div",{className:"cartpage"},c.a.createElement("h2",{className:"cartpage-title"},"Shopping Cart"),a.length?c.a.createElement(c.a.Fragment,null,a.map((function(e){return c.a.createElement(p,{key:e.id,product:e})})),c.a.createElement("div",null,"Total: ",r,":-"),c.a.createElement("div",null,"Items: ",l," pcs"),c.a.createElement("button",{onClick:function(){return o()},className:"button-clear"},c.a.createElement(s.b,{onClick:function(){return m(i)},to:"/",className:"link-clear"}," ","Clear Cart")),c.a.createElement("button",{className:"button-checkout"},c.a.createElement(s.b,{onClick:function(){return m(i)},to:"/checkout",className:"link-checkout"},"Go to checkout"))):c.a.createElement("h5",{className:"cart-empty"},"Your Cart is Empty"))}function v(e){var t=e.children,a=Object(n.useContext)(E),r=a.itemCount,l=a.toggleCart,o=a.showCart;return c.a.createElement("div",null,c.a.createElement("header",{className:"header navbar fixed-top navbar-light  mb-4 header-color"},c.a.createElement(s.b,{onClick:function(e){return l(e)},className:"header-home link navbar-brand",to:"/"},c.a.createElement("h4",null,"Home")),function(){if(!o)return c.a.createElement("span",{onClick:function(){return l(!1)}},c.a.createElement(m.a,{className:"cart-ui"}),"(".concat(r,")"))}(),function(){if(o)return c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{onClick:function(){return l(!0)}},c.a.createElement(m.a,{className:"cart-ui"}),"(".concat(r,")")),c.a.createElement(h,{toggle:o}))}()),t,c.a.createElement("footer",{className:"footer"},c.a.createElement("div",null,"Room4Shop"),c.a.createElement("div",null,"Project Assignment for Javascript 3, React")))}var g=a(10),N=a.n(g),j=function(e){var t=e.name,a=e.description,r=e.price,l=(e.rating,e.stock,e.images),o=e.id,m={name:t,price:r,image:l[0].src.small,id:o},i=Object(n.useState)(!1),u=Object(d.a)(i,2),b=(u[0],u[1],Object(n.useContext)(E)),f=b.addProduct,p=b.cartItems,h=b.increase,v=b.isInCart,g=(Object(n.useRef)(!0),Object(n.useState)()),N=Object(d.a)(g,2);N[0],N[1];var j=a.toString().substring(0,20);return c.a.createElement("div",{className:"col-md-3 d-flex align-items-stretch ",style:{marginTop:70}},c.a.createElement("div",{className:"items-wrapper card flex-grow",style:{width:1e3}},c.a.createElement("img",{src:l[0].src.small,alt:l[0].alt,className:"Image card-img-top",style:{maxHeight:170,minHeight:170,objectFit:"cover"}}),c.a.createElement("div",{className:"card-body"},c.a.createElement("h5",{className:"card-title"},t),c.a.createElement("p",{className:"card-text"},"Price :- ",r,"kr"),c.a.createElement("p",{className:"card-text"},j,"...")),c.a.createElement("div",{className:"card-footer"},c.a.createElement(s.b,{to:"/product/".concat(o)},c.a.createElement("button",{className:"btn btn-outline-primary btn-sm mr-2"},"Info")),v(m,p)?c.a.createElement("button",{className:"btn btn-outline-success btn-sm",onClick:function(){return h(m)}},"Add More"):c.a.createElement("button",{className:"btn btn-success btn-sm",onClick:function(){return f(m)}},"Add to Cart"))))};var O=function(e){var t=e.productId,a=Object(n.useState)({}),r=Object(d.a)(a,2),l=r[0],o=r[1];return Object(n.useEffect)((function(){N.a.get("https://mock-data-api.firebaseio.com/e-commerce/reviews/".concat(t,".json")).then((function(e){if(e.data)return o(e.data)}))}),[]),console.log(l),c.a.createElement(c.a.Fragment,null,c.a.createElement("h5",{className:"card-header"},"Reviews"),Object.keys(l).length?c.a.createElement(c.a.Fragment,null,Object.entries(l).map((function(e,t){return c.a.createElement("div",{key:t,className:"card-body"},c.a.createElement("div",{className:"card"},c.a.createElement("h6",{className:"card-header"},e[1].title),c.a.createElement("div",{className:"card-body"},c.a.createElement("p",null,e[1].description),c.a.createElement("footer",{className:"blockquote-footer"},e[1].author.name," ",e[1].date))))}))):c.a.createElement("span",null,"No Reviews"))};var C=function(e){var t=e.data,a={name:t.name,price:t.price,id:t.id,src:t.images?t.images[0].src.small:""},r=Object(n.useContext)(E),l=r.addProduct,o=r.increase,s=r.isInCart,m=r.cartItems;return c.a.createElement("div",{className:"detail-card card mx-5 "},c.a.createElement("img",{src:t.images[0].src.small,className:"card-img-top"}),c.a.createElement("div",{className:"card-body"},c.a.createElement("h5",{className:"card-title"},t.name),c.a.createElement("h6",null,"Price:- ",t.price," kr"),c.a.createElement("p",null,t.stock," in stock"),c.a.createElement("h6",{className:"card-text"},t.description),s(a,m)?c.a.createElement("button",{className:"btn btn-outline-success",onClick:function(){return o(a)}},"Add More"):c.a.createElement("button",{className:"btn btn-success mt-4",onClick:function(){return l(a)}},"Add to Cart"),c.a.createElement("div",{className:"card mt-4"},c.a.createElement(O,{productId:t.id}))))},k=function(){var e=Object(n.useState)({}),t=Object(d.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){N.a.get("https://mock-data-api.firebaseio.com/e-commerce/products.json").then((function(e){r(e.data)}))}),[]),c.a.createElement("div",{className:"main-container row mx-5 wrapper-container"},Object.entries(a).map((function(e){return c.a.createElement(j,Object.assign({key:e[0]},e[1]))})))};var y=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(k,null))},I=function(e){var t=e.productId,a=Object(n.useState)(null),r=Object(d.a)(a,2),l=r[0],o=r[1];return Object(n.useEffect)((function(){N.a.get("https://mock-data-api.firebaseio.com/e-commerce/products/".concat(t,".json")).then((function(e){return o(e.data)}))}),[]),c.a.createElement(c.a.Fragment,null,l&&c.a.createElement(C,{data:l}))};function S(e){var t=e.match.params.id;return c.a.createElement("div",{className:"detail-container info-fix"},c.a.createElement(I,{productId:t}))}var w=function(e){var t=e.img,a=e.name,n=e.quantity,r=e.price;return c.a.createElement("tr",{scope:"row"},c.a.createElement("td",null,c.a.createElement("div",{className:"checkout-image-wrapper"},c.a.createElement("img",{src:t,className:"checkout-image"}))),c.a.createElement("td",null,a),c.a.createElement("td",null,n," pcs"),c.a.createElement("td",null,r,":-"))},x=a(34),q=a.n(x),P=a(35);var A=Object(o.f)((function(e){e.setOrder;var t=e.discountPrice,a=e.cartItems,r=e.clearCart,l=e.setDiscountPrice,o=e.userInput,s=e.history,m=Object(n.useState)(q()().format("LLL")),i=Object(d.a)(m,1)[0];return Object(n.useEffect)((function(){r(),function(e,t){t.length&&N.a.post("https://mock-data-api.firebaseio.com/e-commerce/orders/group4.json",{ordered_by:o,totalPrice:e,productList:t,ordered_at:i}).then((function(e){console.log(e),l(0)}))}(t,a)}),[]),c.a.createElement("div",{className:"backdrop"},c.a.createElement("div",{className:"modal"},c.a.createElement("h2",null,"Thank You ",o),c.a.createElement("div",{className:"modal-close"},c.a.createElement(P.a,{onClick:function(){return s.push("/")}})),c.a.createElement("span",null,"Your Order On the Way"),c.a.createElement("button",{className:"modal-conten",onClick:function(){return s.push("/")}},"Buy More"))," ")}));var F=function(){var e=Object(n.useContext)(E),t=Object(n.useState)({}),a=Object(d.a)(t,2),r=a[0],l=a[1],o=Object(n.useState)(),s=Object(d.a)(o,2),m=s[0],i=s[1],u=Object(n.useState)([]),b=Object(d.a)(u,2),f=b[0],p=b[1],h=Object(n.useState)(!1),v=Object(d.a)(h,2),g=v[0],j=v[1],O=Object(n.useRef)(),C=Object(n.useRef)(),k=Object(n.useState)(0),y=Object(d.a)(k,2),I=y[0],S=y[1],x=parseInt(e.totalSum),q=function(e){i(O.current.value.toUpperCase());var t="https://mock-data-api.firebaseio.com/e-commerce/couponCodes/".concat(m,".json");N.a.get(t).then((function(e){l(e.data)}))};Object(n.useEffect)((function(){q()}),[m]),Object(n.useEffect)((function(){p(P())}),[r]);var P=function(){S(x),console.log(I);var e=r&&r.discount;return"BLACKFRIDAY"===m||"SUMMER19"===m||"BLACKFRIDAY2019"===m?I*e:I};return c.a.createElement("div",{className:"checkout-container"},c.a.createElement("h3",{className:"checkout-header"},"Welcome to Checkout"),c.a.createElement("table",{className:"table"},c.a.createElement("thead",{className:"thead-dark"},c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"Image"),c.a.createElement("th",{scope:"col"}," Product"),c.a.createElement("th",{scope:"col"}," Quantity "),c.a.createElement("th",{scope:"col"},"Price"))),c.a.createElement("tbody",null,e.cartItems.map((function(e,t){return c.a.createElement(w,{key:t,img:e.image,name:e.name,quantity:e.quantity,price:e.price})}))),c.a.createElement("tfoot",null)),c.a.createElement("input",{type:"text",ref:O,placeholder:"Enter Coupon Code"}),function(){if("BLACKFRIDAY"===m||"SUMMER19"===m||"BLACKFRIDAY2019"===m)return O.current.disabled=!0}()&&c.a.createElement("span",{className:"validCupon"}," Discount applied "),null==r&&c.a.createElement("span",null," Invalid Coupon code"),c.a.createElement("button",{className:"button-discount btn btn-primary btn-sm",onClick:q},"Apply discount"),c.a.createElement("input",{type:"text",ref:C,placeholder:"Enter Your name",className:"input-order-name"}),c.a.createElement("button",{onClick:function(){return j(!0)},className:"button-discount btn btn-success btn-sm"},"Order"),c.a.createElement("h5",{className:"checkout-price"},"Total Price: ",Math.ceil(f)," kr"),g&&c.a.createElement(A,Object.assign({discountPrice:f},e,{setOrder:j,setDiscountPrice:p,userInput:C.current.value})))};a(65);var R=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(o.c,null,c.a.createElement(o.a,{path:"/product/:id",render:function(e){return c.a.createElement(v,null,c.a.createElement(S,e))}}),c.a.createElement(o.a,{path:"/checkout"},c.a.createElement(v,null,c.a.createElement(F,null))),c.a.createElement(o.a,{path:"/"},c.a.createElement(v,null,c.a.createElement(y,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(b,null,c.a.createElement(s.a,null,c.a.createElement(R,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.a948c572.chunk.js.map